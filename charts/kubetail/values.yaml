# Default values for kubetail chart.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Override the chart's computed fullname
fullnameOverride: null

# -- Overrides the chart's name
nameOverride: null

# -- Override the release's namespace
namespaceOverride: null

# ###########################################################################################
#
# Base config for Kubetail app including Kubernetes configurations
#
# ###########################################################################################

kubetail:
  # --- Restrict namespaces
  allowedNamespaces: []

  # -- Define secrets
  secrets:
    # -- Base64-encoded secret value for dashboard csrf (will be autogenerated if null)
    KUBETAIL_DASHBOARD_CSRF_SECRET: null
    # -- Base64-encoded secret value for dashboard session (will be autogenerated if null)
    KUBETAIL_DASHBOARD_SESSION_SECRET: null
    # -- Base64-encoded secret value for cluster-api csrf (will be autogenerated if null)
    KUBETAIL_CLUSTER_API_CSRF_SECRET: null

  # -- Global settings
  global:
    # -- Extra annotations
    annotations: {}
    # -- Extra labels
    labels: {}

  # -- Kubetail dashboard component settings
  dashboard:
    # -- Enable/disable dashboard
    enabled: true
    # -- Sets the auth mode
    authMode: auto

    # -- Runtime configuration settings
    runtimeConfig:
      # -- Sets the container ports to listen on
      ports:
        # -- Sets the http port number
        http: 8080
      # -- Sets the url path prefix (useful for deploying on a sub-path behind a reverse proxy)
      basePath: /
      # -- Sets the mode for the Gin framework
      ginMode: "release"
      # -- CSRF options
      csrf:
        # -- Enables/disables csrf protection
        enabled: true
        # -- Sets the name to use for token in forms
        fieldName: "csrf_token"
        # -- Cookie options
        cookie:
          # -- Sets the cookie `name` property
          name: "kubetail_dashhboard_csrf"
          # -- Sets the cookie `path` property
          path: "/"
          # -- Sets the cookie `domain` property
          domain: null
          # -- Sets the cookie max age (in seconds)
          maxAge: 43200
          # -- Sets the cookie `secure` property
          secure: false
          # -- Sets the cookie `httpOnly` property
          httpOnly: true
          # -- Sets the cookie `sameSite` property (strict, lax, none)
          sameSite: "strict"
      # -- Logging options
      logging:
        # -- Enables/disables logging
        enabled: true
        # -- Sets the logging level (debug, info, warn, error, disabled)
        level: "info"
        # -- Sets the logging format (json, pretty)
        format: "json"
        # -- Access log options
        accessLog:
          # -- Enables/disables logging
          enabled: true
          # -- Hides health checks from access log
          hideHealthChecks: true
      # -- Session options
      session:
        # -- Cookie options
        cookie:
          # -- Sets the cookie `name` property
          name: "kubetail_dashboard_session"
          # -- Sets the cookie `path` property
          path: "/"
          # -- Sets the cookie `domain` property
          domain: null
          # -- Sets the cookie max age (in seconds)
          maxAge: 1092000
          # -- Sets the cookie `secure` property
          secure: false
          # -- Sets the cookie `httpOnly` property
          httpOnly: true
          # -- Sets the cookie `sameSite` property (strict, lax none)
          sameSite: "lax"
      # -- TLS options
      tls:
        # -- Enables/disables TLS termination
        enabled: false
        # -- Path to TLS certificate file
        certFile: null
        # -- Path to TLS key file
        keyFile: null

    # -- Docker image settings
    image:
      # -- Image registry
      registry: "docker.io"
      # -- Image repository
      repository: "kubetail/kubetail-dashboard"
      # -- Image tag
      tag: "0.4.4"
      # -- Overrides the image tag with an image digest
      digest: null
      # -- Docker image pull policy
      pullPolicy: "IfNotPresent"

    # -- Container settings
    container:
      # -- Name
      name: "kubetail-dashboard"
      # -- Additional env
      extraEnv: []
      # -- Additional envFrom
      extraEnvFrom: []
      # -- Container security context
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
            - ALL
        readOnlyRootFilesystem: true
        runAsUser: 1000
        runAsGroup: 1000
      # -- Resources
      resources: {}

    # -- Pod resource settings
    podTemplate:
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}
      # -- Additional containers
      extraContainers: []
      # -- Pod security context
      securityContext: {}
      # -- Affinity settings
      affinity: {}
      # -- Node selector settings
      nodeSelector: {}
      # -- Tolerations
      tolerations: []

    # -- ConfigMap resource settings
    configMap:
      # -- Overrides the ConfigMap resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- Deployment resource settings
    deployment:
      # -- Overrides the Deployment resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}
      # -- Replicas
      replicas: 1
      # -- Revision history limit
      revisionHistoryLimit: 5
      # -- Strategy
      strategy:
        type: "RollingUpdate"

    # -- Ingress resource settings
    ingress:
      # -- Enable resource
      enabled: false
      # -- Overrides the ClusterRole resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}
      # -- Rules
      rules: []
      # -- TLS
      tls: []
      # -- Class name
      className: null

    # -- RBAC resource settings
    rbac:
      # -- Overrides RBAC resource names whose defaults are based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- Secret resource settings
    secret:
      # -- Enable resource
      enabled: true
      # -- Overrides the Secret resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- Service resource settings
    service:
      # -- Overrides the Service resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}
      # -- External ports
      ports:
        # -- Sets the http port number
        http: 8080

    # -- ServiceAccount resource settings
    serviceAccount:
      # -- Overrides the Service resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

  # -- Kubetail Cluster API component settings
  clusterAPI:
    # -- Enable/disable Cluster API
    enabled: true

    # -- Runtime configuration settings
    runtimeConfig:
      # -- Sets the container ports to listen on
      ports:
        # -- Sets the http port number
        http: 8080
      # -- Sets the url path prefix (useful for deploying on a sub-path behind a reverse proxy)
      basePath: /
      # -- Sets the mode for the Gin framework
      ginMode: "release"
      # -- CSRF options
      csrf:
        # -- Enables/disables csrf protection
        enabled: true
        # -- Sets the name to use for token in forms
        fieldName: "csrf_token"
        # -- Cookie options
        cookie:
          # -- Sets the cookie `name` property
          name: "kubetail_cluster_api_csrf"
          # -- Sets the cookie `path` property
          path: "/"
          # -- Sets the cookie `domain` property
          domain: null
          # -- Sets the cookie max age (in seconds)
          maxAge: 43200
          # -- Sets the cookie `secure` property
          secure: false
          # -- Sets the cookie `httpOnly` property
          httpOnly: true
          # -- Sets the cookie `sameSite` property (strict, lax, none)
          sameSite: "strict"
      # -- Logging options
      logging:
        # -- Enables/disables logging
        enabled: true
        # -- Sets the logging level (debug, info, warn, error, disabled)
        level: "info"
        # -- Sets the logging format (json, pretty)
        format: "json"
        # -- Access log options
        accessLog:
          # -- Enables/disables logging
          enabled: true
          # -- Hides health checks from access log
          hideHealthChecks: true
      # -- TLS options
      tls:
        # -- Enables/disables TLS termination
        enabled: false
        # -- Path to TLS certificate file
        certFile: null
        # -- Path to TLS key file
        keyFile: null

    # -- Docker image settings
    image:
      # -- Image registry
      registry: "docker.io"
      # -- Image repository
      repository: "kubetail/kubetail-cluster-api"
      # -- Image tag
      tag: "0.2.4"
      # -- Overrides the image tag with an image digest
      digest: null
      # -- Docker image pull policy
      pullPolicy: "IfNotPresent"

    # -- Container settings
    container:
      # -- Name
      name: "kubetail-cluster-api"
      # -- Additional env
      extraEnv: []
      # -- Additional envFrom
      extraEnvFrom: []
      # -- Container security context
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
            - ALL
        readOnlyRootFilesystem: true
        runAsUser: 1000
        runAsGroup: 1000
      # -- Resources
      resources: {}

    # -- Pod resource settings
    podTemplate:
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}
      # -- Additional containers
      extraContainers: []
      # -- Pod security context
      securityContext: {}
      # -- Affinity settings
      affinity: {}
      # -- Node selector settings
      nodeSelector: {}
      # -- Tolerations
      tolerations: []

    # -- ConfigMap resource settings
    configMap:
      # -- Overrides the ConfigMap resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- Deployment resource settings
    deployment:
      # -- Overrides the Deployment resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}
      # -- Replicas
      replicas: 1
      # -- Revision history limit
      revisionHistoryLimit: 5
      # -- Strategy
      strategy:
        type: "RollingUpdate"

    # -- RBAC resource settings
    rbac:
      # -- Overrides RBAC resource names whose defaults are based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- Secret resource settings
    secret:
      # -- Enable resource
      enabled: true
      # -- Overrides the Secret resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- Service resource settings
    service:
      # -- Overrides the Service resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}
      # -- External ports
      ports:
        # -- Sets the http port number
        http: 8080

    # -- ServiceAccount resource settings
    serviceAccount:
      # -- Overrides the Service resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

  # -- Kubetail Cluster Agent component settings
  clusterAgent:
    # -- Enable/disable agent
    enabled: true

    # -- Runtime configuration settings
    runtimeConfig:
      # -- Sets the container ports to listen on
      ports:
        # -- Sets the gRPC port number
        grpc: 50051
      # -- Logging options
      logging:
        # -- Enables/disables logging
        enabled: true
        # -- Sets the logging level (debug, info, warn, error, disabled)
        level: "info"
        # -- Sets the logging format (json, pretty)
        format: "json"
      # -- TLS options
      tls:
        # -- Enables/disables TLS termination
        enabled: false
        # -- Path to TLS certificate file
        certFile: null
        # -- Path to TLS key file
        keyFile: null

    # -- Docker image settings
    image:
      # -- Image registry
      registry: "docker.io"
      # -- Image repository
      repository: "kubetail/kubetail-cluster-agent"
      # -- Image tag
      tag: "0.2.2"
      # -- Overrides the image tag with an image digest
      digest: null
      # -- Docker image pull policy
      pullPolicy: "IfNotPresent"

    # -- Container settings
    container:
      # -- Name
      name: "kubetail-cluster-agent"
      # -- Additional env
      extraEnv: []
      # -- Additional envFrom
      extraEnvFrom: []
      # -- Container security context
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          add:
            - DAC_READ_SEARCH
          drop:
            - ALL
        readOnlyRootFilesystem: true
        runAsGroup: 1000
        runAsUser: 1000
      # -- Resources
      resources: {}

    # -- Pod resource settings
    podTemplate:
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}
      # -- Additional containers
      extraContainers: []
      # -- Pod security context
      securityContext:
        fsGroup: 0
      # -- Affinity settings
      affinity: {}
      # -- Node selector settings
      nodeSelector: {}
      # -- Tolerations
      tolerations:
      - key: "node-role.kubernetes.io/master"
        operator: "Exists"
        effect: "NoSchedule"
      - key: "node-role.kubernetes.io/control-plane"
        operator: "Exists"
        effect: "NoSchedule"

    # -- ConfigMap resource settings
    configMap:
      # -- Overrides the ConfigMap resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- DaemonSet resource settings
    daemonSet:
      # -- Overrides the Deployment resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- NetworkPolicy resource settings
    networkPolicy:
      # -- Enable resource
      enabled: true
      # -- Overrides the NetworkPolicy resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- Service resource settings
    service:
      # -- Overrides the Service resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- ServiceAccount resource settings
    serviceAccount:
      # -- Overrides the Service resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

  cli:
    # -- Enable/disable CLI resources
    enabled: true

    # -- RBAC resource settings
    rbac:
      # -- Overrides RBAC resource names whose defaults are based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}

    # -- ServiceAccount resource settings
    serviceAccount:
      # -- Overrides the Service resource name whose default is based on the chart's computed fullname
      name: null
      # -- Additional annotations
      annotations: {}
      # -- Additional labels
      labels: {}
